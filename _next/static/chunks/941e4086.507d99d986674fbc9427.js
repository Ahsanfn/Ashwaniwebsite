(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{z5Jz:function(e,t,i){"use strict";i.d(t,"a",(function(){return B}));var n=i("iYmT"),o=i("ODXe"),l=i("h4VS"),a=i("rePB"),c=i("wTIg"),d=i("q1tI"),s=i.n(d),b=i("ha4E"),r=i("cZi2"),u=i("nOHt"),g=i("pFCb"),v=i("3n7N"),j=i("6SUV"),p=i("cOT2"),O=i("VX74"),f=i("qKvR");s.a.createElement;function m(){var e=Object(l.a)(["\n    mutation CancelEscape($bookingId: ObjectId!) {\n        cancelEscape(bookingId: $bookingId) {\n            _id\n        }\n    }\n"]);return m=function(){return e},e}var h=Object(c.a)("h3",{target:"e1q3q1hc0"})(Object(a.a)({fontSize:24,fontWeight:r.f.bold,marginBottom:16,padding:16},r.i.lg,{padding:"0 32px"}),""),x=Object(c.a)("div",{target:"e1q3q1hc1"})(Object(a.a)({fontWeight:r.f.light,fontSize:14,lineHeight:"22px",width:"50%",textAlign:"right"},r.i.lg,{textAlign:"left",marginTop:16,width:"100%"}),""),y=Object(c.a)("div",{target:"e1q3q1hc2"})(Object(a.a)({fontWeight:r.f.light,fontSize:14,lineHeight:"22px",padding:16},r.i.lg,{padding:"0 32px"}),""),q=Object(c.a)("div",{target:"e1q3q1hc3"})({fontWeight:r.f.light,fontSize:14,lineHeight:"22px",marginTop:32},""),C=Object(c.a)("div",{target:"e1q3q1hc4"})(Object(a.a)({fontWeight:r.f.book,fontSize:14,lineHeight:"22px",width:"50%"},r.i.lg,{width:"100%"}),""),w=Object(c.a)("div",{target:"e1q3q1hc5"})(Object(a.a)({display:"flex",justifyContent:"space-between",paddingBottom:8},r.i.lg,{display:"unset"}),""),k=Object(c.a)("div",{target:"e1q3q1hc6"})({name:"8u2z2h",styles:"display:flex;justify-content:space-between;padding-bottom:8px;"}),S=Object(c.a)("div",{target:"e1q3q1hc7"})({fontWeight:r.f.bold,fontSize:14,lineHeight:"22px"},""),A=Object(O.gql)(m()),I={name:"v1pv54",styles:"justify-self:end;"},z={name:"v1pv54",styles:"justify-self:end;"},T={name:"v1pv54",styles:"justify-self:end;"},W={name:"1jbawm2",styles:"margin:16px 0;"},E={name:"1isemmb",styles:"margin-left:8px;"},_={name:"170v0n6",styles:"margin:0 0 16px 0;"},B=function(e){var t,i,l,c,s,m,B,D,H,P,Y,J,R,U,V,F=e.booking,N=e.setCancelled,X=Object(O.useMutation)(A),$=Object(o.a)(X,1)[0],K=Object(u.useRouter)().query,M=Object(g.c)().market,Q=Object(d.useState)(!1),Z=Q[0],G=Q[1],L=Object(d.useState)(!1),ee=L[0],te=L[1],ie="US"===M?"USD":"CAD",ne="CA"===M?"".concat(null===F||void 0===F?void 0:null===(t=F.date)||void 0===t?void 0:null===(i=t.pricePerPerson[ie])||void 0===i?void 0:i.formatted," CAD"):null===F||void 0===F?void 0:null===(l=F.date)||void 0===l?void 0:null===(c=l.pricePerPerson[ie])||void 0===c?void 0:c.formatted,oe="".concat(null===(s=F.transactions)||void 0===s?void 0:null===(m=s.items[0])||void 0===m?void 0:null===(B=m.cardInfo)||void 0===B?void 0:B.cardType," ending in ").concat(null===(D=F.transactions)||void 0===D?void 0:null===(H=D.items[0])||void 0===H?void 0:null===(P=H.cardInfo)||void 0===P?void 0:null===(Y=P.cardNumber)||void 0===Y?void 0:Y.slice(-4));return Object(f.e)("div",{css:Object(n.a)(Object(a.a)({maxWidth:668,borderTop:"1px solid ".concat(r.d.gray_medium_light)},r.i.lg,{borderTop:"none"}),"")},Object(f.e)(h,null,"Cancel your reservation"),Object(f.e)(y,null,"You will cancel this reservation for all guests"),Object(f.e)("div",{css:Object(n.a)(Object(a.a)({margin:"32px 16px 16px",paddingBottom:8,borderBottom:"1px solid ".concat(r.d.gray_medium_light)},r.i.lg,{margin:"32px 32px 16px",display:"grid",gridTemplateColumns:"4fr 1fr 1fr 1fr"}),"")},Object(f.e)(w,null,Object(f.e)(C,null,"Item"),Object(f.e)(x,null,null===F||void 0===F?void 0:null===(J=F.date)||void 0===J?void 0:null===(R=J.escape)||void 0===R?void 0:R.name)),Object(f.e)(w,{css:I},Object(f.e)(C,null,"Cost"),Object(f.e)(x,null,ne)),Object(f.e)(w,{css:z},Object(f.e)(C,null,"Quantity"),Object(f.e)(x,null,null===F||void 0===F?void 0:F.nbParticipants)),Object(f.e)(w,{css:T},Object(f.e)(C,{css:Object(n.a)(Object(a.a)({},r.i.lg,{textAlign:"right"}),"")},"Total paid"),Object(f.e)(x,{css:Object(n.a)(Object(a.a)({},r.i.lg,{textAlign:"right"}),"")},null===F||void 0===F?void 0:null===(U=F.amount)||void 0===U?void 0:U.formatted," ","CA"===M&&"CAD"))),Object(f.e)("div",{css:Object(n.a)(Object(a.a)({borderBottom:"1px solid ".concat(r.d.gray_medium_light),padding:16},r.i.lg,{padding:"0 32px 16px"}),"")},Object(f.e)(k,null,Object(f.e)(S,null,"Amount to be refunded"),Object(f.e)(S,null,null===F||void 0===F?void 0:null===(V=F.amount)||void 0===V?void 0:V.formatted," ","CA"===M&&"CAD")),Object(f.e)(q,null,"Your cancellation will be processed immediately. Your refund will go back to your original form of payment ",oe,".")),Object(f.e)("div",{css:Object(n.a)(Object(a.a)({padding:16},r.i.md,{padding:"0 32px"}),"")},Object(f.e)(b.a,{onClick:function(){try{(null===F||void 0===F?void 0:F.canCancel)&&te(!0),(null===F||void 0===F?void 0:F.canCancel)&&!ee&&$({variables:{bookingId:null===K||void 0===K?void 0:K.bookingId}}).then((function(){N(!0),te(!1),Object(v.d)({event:"eeRefund",ecommerce:{refund:{actionField:{id:null===K||void 0===K?void 0:K.bookingId}}}})}))}catch(e){G(!0)}},css:W,disabled:!(null===F||void 0===F?void 0:F.canCancel)||ee},"Cancel reservation",ee&&Object(f.e)(p.a,{css:E})),(!(null===F||void 0===F?void 0:F.canCancel)||Z)&&Object(f.e)("div",{css:_},Object(f.e)(j.d,{css:Object(n.a)({fontSize:14,fontWeight:r.f.book,gap:8},""),message:Z?"Online Escapes booking unable to cancel":"Online Escapes bookings cannot be canceled within 24 hours of the Online Escape."}))))}}}]);